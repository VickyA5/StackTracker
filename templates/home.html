{% extends 'base.html' %}
{% block content %}
  <div class="centered">
    <h1 style="margin-top:0">Welcome, {{ user.username }}</h1>
    <p class="subtitle">You can add a new supplier or select an existing one to compare stock levels.</p>
    <div style="margin-top:24px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap;">
      <a class="btn" href="{% url 'supplier_create' %}" aria-label="Create Supplier">
        <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px;">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        Create Supplier
      </a>
    </div>
    <hr style="margin-top:20px; border-color:#1f2937;" />
    <div style="margin-top:12px;">
      {% if suppliers %}
        <h3 style="margin-bottom:8px">Your suppliers</h3>
        <div style="display:flex; flex-direction:column; gap: 12px;">
          {% for s in suppliers %}
            <section style="width:100%; background:#111827; border:1px solid #1f2937; border-radius:8px; padding:16px;">
              <div style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
                <strong style="font-size:16px;">{{ s.name }}</strong>
                <div style="display:flex; gap:8px;">
                  <a class="btn" href="{% url 'supplier_upload' s.id %}">Upload Excel</a>
                  <a class="btn secondary" href="{% url 'supplier_delete' s.id %}" aria-label="Delete supplier" title="Delete" style="background:#dc2626; min-width:auto; width:auto; padding:8px 10px; display:inline-flex; align-items:center; justify-content:center;">
                    <svg aria-hidden="true" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="3 6 5 6 21 6"/>
                      <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                      <path d="M10 11v6M14 11v6"/>
                      <path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/>
                    </svg>
                  </a>
                </div>
              </div>
              <div class="muted" style="margin-top:6px; text-align:left;">Last file: {% if s.last_uploaded_filename %}{{ s.last_uploaded_filename }}{% else %}No file uploaded yet{% endif %}</div>
              {% if s.current_file %}
                <div class="muted" style="margin-top:6px; font-size:12px; text-align:left;">Last updated: {{ s.updated_at|date:"Y-m-d H:i" }}</div>
              {% endif %}
            </section>
          {% endfor %}
        </div>
      {% else %}
        <p>No suppliers yet. Use "Create Supplier" to add one.</p>
      {% endif %}
    </div>
  </div>
  {% endblock %}
